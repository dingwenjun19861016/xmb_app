# XMB 美股快报 React Native Web 部署文档

## 项目概述

XMB 美股快报是一个基于 React Native 的跨平台应用，支持 iOS、Android 和 Web 平台。本文档详细说明 Web 版本的构建、打包和部署流程。

## 技术栈

- **框架**: React Native + Expo
- **Web 支持**: Expo Web
- **打包工具**: Metro Bundler / Webpack
- **进程管理**: PM2
- **Web 服务器**: serve / nginx

### 生产模式（内存使用：~50-200MB） 

#### WEB部署，IOS都用着一种，目前没有IOS的原生APP
1. 完成开发和本地测试；
2. 前往MAC（小盒子）的xmb_app目录下面；
3. ./scripts/update-version.sh "1.0.0"
4. 执行yarn prod


#### Android原生APP部署，本地编译：
1. 修改package.json的版本号：比如1.0.0；
2. ./scripts/update-version.sh "1.0.1"
3. ./scripts/build-android.sh
4. ./scripts/verify-apk.sh 编译出的文件
5. 放到P1服务器的public/app目录下面；
6. 将APP_ANDROID_UPDATE_ENABLE设为false；
7. 将APP_ANDROID_UPDATE_URL设为https://xmb.me/app/xmb_signed_1.0.0.apk
8. 将APP_ANDROID_UPDATE_VER的版本改为1.0.0
9. 确认上面准备动作都已经做好，进入测试；
10. 准备好自己本地的APP，关掉；
11. 将APP_ANDROID_UPDATE_ENABLE设为true；
12. 打开手机APP，看到弹出框，选择更新软件；
13. 完成更新即可；