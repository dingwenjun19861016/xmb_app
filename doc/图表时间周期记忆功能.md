# 图表时间周期切换功能说明

## 功能概述

实现了简化的图表类型切换时间周期逻辑，确保用户在价格图表和排名图表之间切换时有合适的默认时间周期。

## 核心特性

### 1. 图表类型默认时间周期
- **价格图表**：切换时默认显示24h，用户可自由调整到其他时间周期
- **排名图表**：切换时默认显示7d，用户可自由调整到其他时间周期

### 2. 智能时间周期过滤
- 排名图表自动排除24h选项，因为24h排名变化意义不大
- 价格图表保留所有时间周期选项（24h, 7d, 30d, 90d, 1y, ALL）
- 排名图表支持中长期时间周期（7d, 30d, 90d, 1y, ALL）

### 3. 简化的切换逻辑
- 不保存时间周期记忆，避免复杂状态管理
- 每次切换图表类型都使用固定的默认值
- 用户在当前图表类型下可自由选择任意可用的时间周期

## 实现细节

### 图表类型切换逻辑
```typescript
const handleChartTypeChange = (type: 'price' | 'rank') => {
  // 切换图表类型
  setChartTypeForCoin(type);
  
  // 根据图表类型设置默认时间周期
  if (type === 'price') {
    // 价格图表默认24h
    onTimePeriodChange('24h');
  } else if (type === 'rank') {
    // 排名图表默认7d
    onTimePeriodChange('7d');
  }
};
```

### 时间周期过滤
```typescript
const getAvailableTimePeriods = () => {
  if (getChartTypeForCoin() === 'rank') {
    return TIME_PERIODS.filter(period => period !== '24h');
  }
  return TIME_PERIODS;
};
```

## 用户体验

### 使用场景示例
1. 用户在BTC价格图表，当前显示30d
2. 切换到BTC排名图表，系统自动显示7d（不记忆之前的30d）
3. 用户在排名图表中手动选择90d
4. 切换回价格图表，系统自动显示24h（不记忆之前的90d）
5. 用户可以在当前图表类型下自由调整到任意可用时间周期

### 默认行为
- 切换到价格图表：总是默认24h
- 切换到排名图表：总是默认7d
- 用户可以在每种图表类型下自由选择其他时间周期

## 优势
- **简单明确**：不需要复杂的状态记忆逻辑
- **可预测**：用户知道切换图表类型时会得到什么默认值
- **灵活性**：用户可以在当前图表类型下自由调整时间周期
- **维护性**：代码简单，易于理解和维护

## 相关文件
- `src/components/charts/CoinPriceChart.tsx` - 主要实现
- `src/screens/Market/CoinDetailScreen.tsx` - 图表集成
- `src/contexts/ChartTypeContext.tsx` - 图表类型全局状态管理

## 测试建议
1. 切换到价格图表，验证默认显示24h
2. 切换到排名图表，验证默认显示7d
3. 在价格图表选择其他时间周期，切换到排名图表后再切换回来，验证重新显示24h
4. 在排名图表选择其他时间周期，切换到价格图表后再切换回来，验证重新显示7d
5. 验证排名图表不显示24h选项
